<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no, user-scalable=no,minimum-scale=1.0, maximum-scale=1.0" />
    <title>模拟操盘</title>

    <meta name="keywords" content="股指期货,期指,黄金,白银,沪深300,中证500,上证50">
    <meta name="description" content="原油期货宝首创操盘人和投资人线上合作交易模式（品种有股指期货、黄金、白银、原油），让有能力的操盘人提供交易买卖指令，有资金的投资人提供交易资金，双方按约定共享收益共担风险。">

    <link rel="stylesheet" href="content/assets/css/page/simulation/merge.css?_=201610330">
	<style>
		.shadeWrap{ position:fixed; width:100%; height:100%; top:0; left:0; z-index:99; background:rgba(0,0,0,.3); font-size:.16rem;}
		.shadeWrap .content{ width: 75%; background: #fff; border-radius: .05rem; position: absolute; top: 50%; margin-top: -20.5%; left: 50%; margin-left: -38%; text-align: center;box-shadow: 0 0 .05rem rgba(0,0,0,.4); }
		.shadeWrap .mainWrap{padding: .25rem; border-bottom: 1px solid #eee;}
		.shadeWrap .action{ height:.38rem; line-height: .38rem; border-radius: 0 0 .05rem .05rem;font-size:.16rem; color:#fff;background:#da3333;}
	</style>
    <script type="text/javascript">
        var __baseDir = 'http://'+window.location.host+'/content/';
    </script>
    
    <script>
		document.getElementsByTagName('html')[0].style.fontSize = '100px'; 
	</script>
    
    <script src="content/assets/js/biz/jquery-1.12.1.min.js"></script>

</head>

<body>

<!-- 头部 -->
<header class="head">
	<a href="index.html" class="icon-youjiantou"></a>
    <h3>模拟练习</h3>
</header>
<!-- 内容 -->
<section class="main">
	<div class="user clear">
    	<i class="icon-icon_coin"></i>
    	<p>可用金币：</p>
       <span>0</span>
       
       <a id="shopping" href="javascript:;">金币商城</a> 
        
    </div>

    <div class="mainDiv">
    	<!--<ul class="mainUl">
        	<li>
            	<a href="">
                	<img>
                    <h5></h5>
                    <p></p>
                </a>
            </li>
            <li>
            	<a href="">
                	<img>
                    <h5></h5>
                    <p></p>
                </a>
            </li>
            <li>
            	<a href="">
                	<img>
                    <h5></h5>
                    <p></p>
                </a>
            </li>
        </ul>-->
    </div>
</section>

<!-- 底部 -->
<footer class="page-footer">
    <div class="content">
        <ul>
            <li class="home">
                <a href="index.html">
                    <span class="icon-home img"></span><span class="active">首页</span>
                </a>
            </li>
            <li class="trade" style="">
                <a href="zhibo/live.html">
                    <span class="icon-live img" style="line-height: 0.18rem; position: relative"></span><span>直播</span>
                </a>
            </li>
            <li class="ziXun">
                <a href="news/info.html">
                    <span class="icon-zx img"></span><span>资讯</span>
                </a>
            </li>
            <li class="mine">
                <a href="mine.html">
                    <span class="icon-gerne img"></span><span>我的</span>
                </a>
            </li>
        </ul>
    </div>
</footer>
<!--弹出层begin-->
<div class="shadeWrap" style="display:none">
	<div class="content">
		<div class="mainWrap">弹出层</div>
		<div class="action">
			<span class="shadow-btn" href="javascript:void(0);">确定</span>
		</div>
	</div>
</div>
<!--弹出层end-->

<script>
var $mainDiv = $('.mainDiv');
var iNow = 0;
var $mainUl = $('.mainUl');
var $mainLi = $mainUl.find('li');
var $user = $('.user');
var $shopping = $('#shopping');
var arr = [];
var isLogin = true;
    
$.each($mainLi,function(){
	if($(this).index() % 3 == 2){
		$(this).css('border-right','none')
	}
})

$.get({
	url: '/order/variety/getVariety.do',
	data: {},
	dataType:'json',
	success: function (e) {

		arr = [];
		var iNow = 0;
		var href = '';
		var num = Math.ceil(e.data.length / 3);
		var color = {
                        'HSI':'#BD6959',
                        'MHI':'#8097C1',
                        'ni':'#9777B4',
                        'pp':'#7DB181',
                        'au':'#7C7931',
                        'ag':'#7FCACA',
                        'rb':'#D19FC7',
                        'SR':'#CACA96',
                        'cu':'#949EC3',
                        'CL':'#b857b2',
                        'GC':'#B59449',
                        'DAX':'#A8D2C6',
                        'CN':'#CC9D82',
                        'ES':'#917795',
                        'NQ':'#62a4a8',
                        'SI':'#98CB76',
                        'YM':'#BD6959',
                        'gray':'#cecece',
                        'AD': '#c7c577',
                        'CD': '#7fcbd4',
                        'NE': '#bda5ce',
                        'SL': '#d9ad9c'
                    }
		for(var i=0;i<num;i++){		//创建ul
			var $mainUl = $('<ul class="mainUl"></ul>');
			$mainDiv.append($mainUl);
		}
		
		for(var i=0;i<e.data.length;i++){	//创建li
			
			if(!e.data[i].isDomestic){
				href = 'guoji/index.html?commodity='+ e.data[i].varietyType +'&tradeType=2';
			}
			else{
				var str = e.data[i].varietyType;
				href = 'trade/index.html?commodity='+ str.toUpperCase() +'&tradeType=2';
			}
			
			var $li = $('<li class="addli"><a href="'+href+'"><i class=icon-'+e.data[i].varietyType+' usename='+e.data[i].varietyType+'></i><h5>'+e.data[i].varietyName+'</h5><p>'+(e.data[i].advertisement || "" )+'</p><em class="icon-chicang"></em></a><span class="top_border"></span><span class="right_border"></span></li>');
			if(e.data[i].exchangeStatus == 1){
				var name = e.data[i].varietyType;
				$li.find('i').css('color',color[name]);
			}
			else{
				$li.find('i').css('color','#cecece');
			}
			arr.push($li);
		}
		var $allUl = $('.mainUl');
		if(arr.length % 3 != 0){
			var num1 = 3 - (arr.length % 3);
			for(var i=0;i<num1;i++){
				var $li1 = $('<li></li>');
				arr.push($li1)
			}
		}
		for(var i=0;i<num;i++){
			for(var j=0;j<3;j++){
				$allUl.eq(i).append(arr[i*3+j]);
			}
		}
		checkCC();
	}
});
function dialogBox(mes){
	var shadeWrap = $(".shadeWrap");
	var content = $(".content");
	shadeWrap.find(".mainWrap").text(mes);
	shadeWrap.css("display","block");
	$(".shadow-btn").on("click",function(){shadeWrap.css("display","none");})
}

$.ajax({
	url: '/user/user/findUserInfo.do',
	data: {},
	dataType: 'json',
	type: 'post',
	success: function (data) {
		if(data.code==200){
			$user.find('span').html(data.data.scoreUsable)
		}
      if(data.code == 503){
          isLogin = false;
      }
	}
});

function checkCC(){
	$.ajax({
		url: '/order/order/getUserPositionCount.do',
		data: {},
		dataType: 'json',
		type: 'get',
		success: function (data) {
			var s = data.data.integralOpS;
			for(var i=0;i<s.length;i++){
				 var str = s[i].varietyType;
				 for(var j=0;j<arr.length;j++){
					 if(arr[j].find('i').attr('usename') == str){
						arr[j].find('em').css('display','block');
					}
				}
			}
		}
	});
}
    
$shopping.on('click',function(){
    if(!isLogin){
        window.location.href = '/user/login.html?callback=/simulation.html';
    }
    else{
        window.location.href = '/mall/mall.html?1';
    }
});

</script>
</body>
</html>
